========================================================================
Empty test
========================================================================
//
------------------------------------------------------------------------
ok

========================================================================
Match expression with single type arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        int => {
            value;
//!         ^ int
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with single type arm and else
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        int => {
            value;
//!         ^ int
        },
        else => {
            value;
//!         ^ int | bool
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with several type arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        int => {
            value;
//!         ^ int
        },
        bool => {
            value;
//!         ^ bool
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with several type arm with null
========================================================================
fun main() {
    val value: int | null;

    match (value) {
        int => {
            value;
//!         ^ int
        },
        null => {
            value;
//!         ^ null
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with single type arm with type alias
========================================================================
fun main() {
    val value: int | bool | slice;

    match (value) {
        int | bool => {
            value;
//!         ^ int | bool
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with single type arm with type alias with nested ifs
========================================================================
fun main() {
    val value: int | bool | slice;

    match (value) {
        int | bool => {
            value;
//!         ^ int | bool

            if (value is int) {
                value;
//!             ^ int
            } else {
                value;
//!             ^ bool
            }
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with single type arm with type alias with nested match
========================================================================
fun main() {
    val value: int | bool | slice;

    match (value) {
        int | bool => {
            value;
//!         ^ int | bool

            match (value) {
                int => {
                    value;
//!                 ^ int
                }
                bool => {
                    value;
//!                 ^ bool
                }
            }
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with single non-type arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        10 => {
            value;
//!         ^ int | bool
        }
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with return arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        10 => return 10
//!                  ^ int
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with throw arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        10 => throw 10
//!                 ^ int
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with expression arm
========================================================================
fun main() {
    val value: int | bool;

    match (value) {
        10 => 10
//!           ^ int
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression type with expression arm
========================================================================
fun main() {
    val value: int | bool;

    val res = match (value) {
//!     ^ int
        10 => 10
//!           ^ int
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression type with expressions arm
========================================================================
fun main() {
    val value: int | bool;

    val res = match (value) {
//!     ^ bool | int
        10 => 10
//!           ^ int
        20 => true
//!           ^ bool
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression type with expressions arm 2
========================================================================
fun main() {
    val value: int | bool;

    val res = match (value) {
//!     ^ null | bool | int
        10 => 10
//!           ^ int
        20 => true
//!           ^ bool
        else => null
//!             ^ null
    }
}
------------------------------------------------------------------------
ok

========================================================================
Match expression with variable
========================================================================
fun main() {
    val value: int | bool;

    match (val some = value) {
        int => {
            some;
//!         ^ int
        }
    }
}
------------------------------------------------------------------------
ok
